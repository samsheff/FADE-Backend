# Server Configuration
NODE_ENV=development
PORT=4000
HOST=0.0.0.0

# Database
DATABASE_URL="postgresql://terminal:terminal@postgres:5432/polymarket_terminal?schema=public"
REDIS_URL="redis://redis:6379"

# If running the backend outside Docker, switch DATABASE_URL/REDIS_URL to localhost:
# DATABASE_URL="postgresql://terminal:terminal@localhost:5432/polymarket_terminal?schema=public"
# REDIS_URL="redis://localhost:6379"

# Blockchain Configuration
POLYGON_RPC_URL=https://polygon-rpc.com
POLYGON_CHAIN_ID=137

# Compatibility aliases (not used by the app code directly)
# RPC_URL -> POLYGON_RPC_URL
# GAMMA_API_BASE -> POLYMARKET_GAMMA_API_URL
# CLOB_* -> POLYMARKET_CLOB_API_*
RPC_URL=
GAMMA_API_BASE=
CLOB_API_KEY=
CLOB_API_SECRET=
CLOB_API_PASSPHRASE=

# Polymarket CLOB API
POLYMARKET_CLOB_API_URL=https://clob.polymarket.com
POLYMARKET_GAMMA_API_URL=https://gamma-api.polymarket.com
POLYMARKET_DATA_API_URL=https://data-api.polymarket.com
# Minimum milliseconds between Gamma API requests (increase if rate limited)
GAMMA_API_REQUEST_INTERVAL_MS=2000
POLYMARKET_CLOB_API_KEY=
POLYMARKET_CLOB_API_SECRET=
POLYMARKET_CLOB_API_PASSPHRASE=
POLYMARKET_CLOB_SIGNER_ADDRESS=

# Polymarket Indexer
POLYMARKET_NETWORK=mainnet
POLYMARKET_RPC_URL=
POLYMARKET_MARKET_REGISTRY_ADDRESS=
POLYMARKET_MARKET_STATE_ADDRESS=

# Optional (reserved for future signer workflow)
SIGNER_PRIVATE_KEY=

# Contract Addresses (Polygon Mainnet)
CTF_EXCHANGE_ADDRESS=0x4bFb41d5B3570DeFd03C39a9A4D8dE6Bd8B8982E
CONDITIONAL_TOKENS_ADDRESS=0x4D97DCd97eC945f40cF65F87097ACe5EA0476045
USDC_ADDRESS=0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174

# Rate Limiting
RATE_LIMIT_MAX=100
RATE_LIMIT_WINDOW=60000

# Security
NONCE_TTL_MS=300000

# Caching
MARKET_CACHE_TTL_MS=60000
ORDERBOOK_CACHE_TTL_MS=30000
ORDERBOOK_SNAPSHOT_TTL_MS=30000

# WebSocket Configuration
CLOB_WS_HEARTBEAT_MS=15000
CLOB_WS_RECONNECT_BASE_MS=1000
CLOB_WS_RECONNECT_MAX_MS=30000

# Background Jobs
MARKET_SYNC_INTERVAL_MS=60000
POSITION_UPDATE_INTERVAL_MS=300000

# Historical Data Backfill
# Delay between Data API requests (milliseconds) - increase if rate limited
HISTORICAL_BACKFILL_RATE_LIMIT_MS=1000
# Number of trades to fetch per API request (max 10,000)
HISTORICAL_BACKFILL_BATCH_SIZE=5000

# Market Data Management
# Automatically mark markets as inactive when CLOB API returns 404 for orderbooks
# Set to 'true' to enable, 'false' or omit to disable (default: false)
# Recommended: Start with 'false' to observe behavior, then enable after verification
AUTO_DEACTIVATE_CLOSED_MARKETS=false

# Logging
LOG_LEVEL=info
